!function(){"use strict";var e="",t=e+"87587e34cbae92f132bb.png",n=e+"4e8e0a1d604782a0dff8.svg",r=e+"1fb42652ca561e9cef14.jpg",o=e+"a1892ea72cb87c8fc3aa.svg",i=e+"d86bb2edc2f6eadb96b7.svg";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._overlay=n}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_visible"),this._overlay.classList.add("overlay-visible")}},{key:"close",value:function(){this._popup.classList.remove("popup_visible"),this._overlay.classList.remove("overlay-visible")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;document.addEventListener("keydown",(function(t){e._handleEscClose(t)}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===a(o)?o:String(o)),r)}var o}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t,n,r,o,c){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(l=i.call(this,e,c))._openButton=t,l._closeButton=n,l._form=r,l._submitButton=o,l._inputList=l._form.querySelectorAll(".popup__input"),l}return t=u,(n=[{key:"setEventListeners",value:function(){var e=this;f(y(u.prototype),"setEventListeners",this).call(this),this._openButton.addEventListener("click",(function(){e.open(),e._form.reset()})),this._closeButton.addEventListener("click",(function(){e.close(),e._form.reset()})),this._overlay.addEventListener("click",(function(){e.close(),e._form.reset()})),this._submitButton.addEventListener("click",(function(){e.close()}))}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(l),b=document.querySelector(".overlay"),d=document.querySelector(".popup_edit-profile"),v=document.querySelector(".profile__edit-button"),_=document.querySelector(".popup__close-button_edit-profile"),h=document.getElementById("editProfileForm"),g=document.querySelector(".popup__button_edit-profile"),S=document.querySelector(".profile__add-button-container"),E=document.querySelector(".popup__close-button_new-place"),w=document.getElementById("newPlaceForm"),k=document.querySelector(".popup_new-place"),j=document.querySelector(".popup__button_new-place"),C=document.querySelector(".profile__name"),P=document.querySelector(".profile__profession"),L=document.querySelector(".popup__input_name"),O=document.querySelector(".popup__input_profession");function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===B(o)?o:String(o)),r)}var o}C.textContent="Aldo Navarro",P.textContent="Programador",L.value=C.textContent,O.value=P.textContent;var I=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=t,this._professionElement=n,this._nameInput=r,this._professionInput=o,this._submitButton=i}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,profession:this._professionElement.textContent}}},{key:"setUserInfo",value:function(){this._nameElement.textContent=this._nameInput.value,this._professionElement.textContent=this._professionInput.value,this._nameInput.placeholder="Name",this._professionInput.placeholder="Profession"}},{key:"setEventListeners",value:function(){var e=this;this._submitButton.addEventListener("click",(function(t){t.preventDefault(),e.setUserInfo()}))}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e,t))._image=n._popup.querySelector(".images-popup__item-image"),n._title=n._popup.querySelector(".images-popup__item-title"),n}return t=u,(n=[{key:"open",value:function(e,t){this._popup.classList.add("images-popup-item-visible"),this._image.src=e,this._title.textContent=t,b.classList.add("overlay-visible")}},{key:"close",value:function(){this._popup.classList.remove("images-popup-item-visible"),b.classList.remove("overlay-visible")}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==D(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}var F=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"render",value:function(){var e=this;this._items.forEach((function(t){var n=e._renderer(t);e.addItem(n)}))}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==U(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===U(o)?o:String(o)),r)}var o}var W=[{name:"Salt Lake City, Wyoming",link:e+"9a226ebf1346af534138.jpg"},{name:"Seattle, Washington",link:e+"4eb9cbad334de3b70936.jpg"},{name:"San Francisco, California",link:e+"0332beca62cc1b380b7a.jpg"},{name:"Miami, Florida",link:e+"e6b4eeba344854bc28df.jpg"},{name:"Hollywood, Los Angeles",link:e+"b8352fd334756b34b2da.jpg"},{name:"Nueva York, Nueva York",link:e+"255e237325a606ac750f.jpg"}];function Y(e,t){var n=new V(document.querySelector(".images-popup__item"));n.open(t,e),document.querySelector(".images-popup__item-close-button").addEventListener("click",(function(){n.close()})),document.addEventListener("keydown",(function(e){n._handleEscClose(e)})),b.addEventListener("click",(function(){n.close()}))}var H=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t.name,this.link=t.link,this.handleCardClick=n}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector("#card-template").content.querySelector(".cards__card").cloneNode(!0)}},{key:"generateCard",value:function(){return this.element=this._getTemplate(),this._setEventListeners(),this.element.querySelector(".cards__card-title").textContent=this.name,this.element.querySelector(".cards__card-image").src=this.link,this.element}},{key:"likeButtonActive",value:function(){this.element.querySelector(".cards__card-like-button-container").classList.toggle("cards__card-like-button-container_active")}},{key:"deleteCard",value:function(){this.element.closest(".cards__card").remove()}},{key:"_setEventListeners",value:function(){var e=this;this.element.querySelector(".cards__card-like-button-container").addEventListener("click",(function(){e.likeButtonActive()})),this.element.querySelector(".cards__card-trash-button").addEventListener("click",(function(){e.deleteCard()})),this.element.querySelector(".cards__card-image").addEventListener("click",(function(){e.handleCardClick(e.name,e.link)}))}}])&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===z(o)?o:String(o)),r)}var o}var J=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._objConfig=t,this._formElement=n,this._submitButton=this._formElement.querySelector(this._objConfig.submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._objConfig.inputSelector))}var t,n;return t=e,(n=[{key:"_showError",value:function(e){var t=this._formElement.querySelector(".popup__error_".concat(e.id));e.classList.add(this._objConfig.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._objConfig.errorClass)}},{key:"_hideError",value:function(e){var t=this._formElement.querySelector(".popup__error_".concat(e.id));e.classList.remove(this._objConfig.inputErrorClass),t.textContent="",t.classList.remove(this._objConfig.errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e)}},{key:"_toggleButtonState",value:function(){this._formElement.checkValidity()?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._objConfig.inactiveButtonClass)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._objConfig.inactiveButtonClass))}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&G(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();document.getElementById("profileEditCloseButton").src=t,document.getElementById("newPlaceCloseButton").src=t,document.getElementById("headerLogo").src=n,document.getElementById("profileImage").src=r,document.getElementById("editButon").src=o,document.getElementById("addButton").src=i,new m(d,v,_,h,g,b).setEventListeners(),new I(C,P,L,O,g).setEventListeners(),new J({inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},document.querySelector(".popup__form")).enableValidation(),new m(k,S,E,w,j,b).setEventListeners(),new J({inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},document.querySelector(".popup__form_new-place")).enableValidation(),new F({items:W,renderer:function(e){return new H(e,Y).generateCard()}},".cards").render(),j.addEventListener("click",(function(){var e,t,n={name:document.querySelector(".popup__input_title").value,link:document.querySelector(".popup__input_url").value};W.push(n),t=new H((e=W)[e.length-1],Y).generateCard(),new F({items:[t],renderer:function(e){return e}},".cards").render()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ekhvSSxvQkFFSixJQUFJOUUsRUFBU0wsRUFBYUMsRUFBbUJDLEVBQWtCQyxFQUF3QlQsR0FDL0Z5RixvQkFFd0IsSUFBSTlCLEVBQWMsQ0FDakRRLGNBQWUsZ0JBQ2ZILHFCQUFzQixpQkFDdEJpQixvQkFBcUIseUJBQ3JCVCxnQkFBaUIsMEJBQ2pCRSxXQUFZLHdCQUNYeEcsU0FBU3dCLGNBQWMsaUJBRURnRyxtQkFFSyxJQUFJckgsRUFBYytCLEVBQXVCSCxFQUFpQkMsRUFBcUJDLEVBQWNFLEVBQXNCaEQsR0FDM0hvSSxvQkFFUSxJQUFJOUIsRUFBYyxDQUM5Q1EsY0FBZSxnQkFDZkgscUJBQXNCLGlCQUN0QmlCLG9CQUFxQix5QkFDckJULGdCQUFpQiwwQkFDakJFLFdBQVksd0JBQ1h4RyxTQUFTd0IsY0FBYywyQkFFSmdHLG1CQUVFLElBQUkxRCxFQUFRLENBQ2xDRyxNQUFPVyxFQUNQVixTQUFVLFNBQUN1RCxHQUdULE9BRmEsSUFBSTFDLEVBQUswQyxFQUFJNUMsR0FDRDZDLGNBRTNCLEdOMUN1QixVTTZDVEMsU0FFaEJ4RixFQUFxQmxDLGlCQUFpQixTRjBDdEMsV0FDSSxJQVVvQjJILEVBRVZsRCxFQVRObUQsRUFBVSxDQUNaMUUsS0FKZ0JuRCxTQUFTd0IsY0FBYyx1QkFBdUIvQixNQUs5RGtFLEtBSmdCM0QsU0FBU3dCLGNBQWMscUJBQXFCL0IsT0FPOURtRixFQUFha0QsS0FBS0QsR0FJUm5ELEVBRFUsSUFBSUssR0FESjZDLEVBYVRoRCxHQVpzQmdELEVBQUlHLE9BQVMsR0FBSWxELEdBQ2xCNkMsZUFDWixJQUFJNUQsRUFDbEIsQ0FDRUcsTUFBTyxDQUFDUyxHQUNSUixTQUFVLFNBQUNPLEdBQUksT0FBS0EsQ0FBSSxHQUUxQixVQUVNa0QsUUFJaEIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvcG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9wb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvY29uc3QuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy91c2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL3BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvc2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9mb3JtVmFsaWRhdGlvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgb3ZlcmxheSkge1xuICAgICAgdGhpcy5fcG9wdXAgPSBwb3B1cFNlbGVjdG9yO1xuICAgICAgdGhpcy5fb3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgfVxuICBcbiAgICBvcGVuKCkge1xuICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfdmlzaWJsZScpO1xuICAgICAgdGhpcy5fb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvdmVybGF5LXZpc2libGUnKTtcbiAgICB9XG4gIFxuICAgIGNsb3NlKCkge1xuICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfdmlzaWJsZScpO1xuICAgICAgdGhpcy5fb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdvdmVybGF5LXZpc2libGUnKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KXtcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gIFxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UoZXZ0KTtcbiAgICAgIH0pO1xuICAgIH1cbn07XG5cbmV4cG9ydCB7UG9wdXB9OyIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vcG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBvcGVuQnV0b25TZWxlY3RvciwgY2xvc2VCdXR0b25TZWxlY3RvciwgZm9ybVNlbGVjdG9yLCBTdWJtaXRCdXR0b24sIG92ZXJsYXkpIHtcbiAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IsIG92ZXJsYXkpO1xuICAgICAgdGhpcy5fb3BlbkJ1dHRvbiA9IG9wZW5CdXRvblNlbGVjdG9yO1xuICAgICAgdGhpcy5fY2xvc2VCdXR0b24gPSBjbG9zZUJ1dHRvblNlbGVjdG9yO1xuICAgICAgdGhpcy5fZm9ybSA9IGZvcm1TZWxlY3RvcjtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IFN1Ym1pdEJ1dHRvbjtcbiAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xuICAgIH1cbiAgXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICBcbiAgICAgIHRoaXMuX29wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgICB9KTtcbiAgXG4gICAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgICB9KTtcbiAgXG4gICAgICB0aGlzLl9vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICAgIH0pO1xuICBcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgfVxufTtcblxuZXhwb3J0IHtQb3B1cFdpdGhGb3JtfTsiLCJjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm92ZXJsYXknKTtcblxuY29uc3QgcHJvZmlsZUZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZWRpdC1wcm9maWxlJyk7XG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgY2xvc2VQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b25fZWRpdC1wcm9maWxlJyk7XG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdFByb2ZpbGVGb3JtXCIpO1xuY29uc3QgcHJvZmlsZVN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uX2VkaXQtcHJvZmlsZScpO1xuXG5jb25zdCBhZGROZXdJbWdCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbi1jb250YWluZXInKTtcbmNvbnN0IGNsb3NlTmV3UGxhY2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbl9uZXctcGxhY2UnKTtcbmNvbnN0IG5ld1BsYWNlRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3UGxhY2VGb3JtXCIpO1xuY29uc3QgbmV3UGxhY2VGb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX25ldy1wbGFjZScpO1xuY29uc3QgbmV3UGxhY2VTdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbl9uZXctcGxhY2UnKTtcblxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xuY29uc3QgcHJvZmlsZVByb2Zlc3Npb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fcHJvZmVzc2lvbicpO1xuY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfbmFtZScpO1xuY29uc3QgcHJvZmlsZVByb2Zlc3Npb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfcHJvZmVzc2lvbicpO1xuXG5wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9ICdBbGRvIE5hdmFycm8nO1xucHJvZmlsZVByb2Zlc3Npb24udGV4dENvbnRlbnQgPSAnUHJvZ3JhbWFkb3InO1xucHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xucHJvZmlsZVByb2Zlc3Npb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVQcm9mZXNzaW9uLnRleHRDb250ZW50O1xuXG5jb25zdCBjYXJkTGlzdFNlbGVjdG9yID0gXCIuY2FyZHNcIjtcblxuZXhwb3J0IHtvdmVybGF5LCBwcm9maWxlRm9ybUNvbnRhaW5lciwgZWRpdFByb2ZpbGVCdXR0b24sIGNsb3NlUHJvZmlsZUJ1dHRvbiwgcHJvZmlsZUZvcm0sIHByb2ZpbGVTdWJtaXRCdXR0b24sIGFkZE5ld0ltZ0J1dHRvbiwgY2xvc2VOZXdQbGFjZUJ1dHRvbiwgbmV3UGxhY2VGb3JtQ29udGFpbmVyLCBuZXdQbGFjZUZvcm0sIG5ld1BsYWNlU3VibWl0QnV0dG9uLCBwcm9maWxlTmFtZSwgcHJvZmlsZVByb2Zlc3Npb24sIHByb2ZpbGVOYW1lSW5wdXQsIHByb2ZpbGVQcm9mZXNzaW9uSW5wdXQsIGNhcmRMaXN0U2VsZWN0b3J9OyIsImNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIHByb2Zlc3Npb25TZWxlY3RvciwgbmFtZUlucHV0LCBwcm9mZXNzaW9uSW5wdXQsIHN1Ym1pdEJ1dHRvbikge1xuICAgICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBuYW1lU2VsZWN0b3I7XG4gICAgICB0aGlzLl9wcm9mZXNzaW9uRWxlbWVudCA9IHByb2Zlc3Npb25TZWxlY3RvcjtcbiAgICAgIHRoaXMuX25hbWVJbnB1dCA9IG5hbWVJbnB1dDtcbiAgICAgIHRoaXMuX3Byb2Zlc3Npb25JbnB1dCA9IHByb2Zlc3Npb25JbnB1dDtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHN1Ym1pdEJ1dHRvbjtcbiAgICB9XG4gIFxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgY29uc3QgbmFtZSA9IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgY29uc3QgcHJvZmVzc2lvbiA9IHRoaXMuX3Byb2Zlc3Npb25FbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgcmV0dXJuIHsgbmFtZSwgcHJvZmVzc2lvbiB9O1xuICAgIH1cbiAgXG4gICAgc2V0VXNlckluZm8oKSB7XG4gICAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWVJbnB1dC52YWx1ZTtcbiAgICAgIHRoaXMuX3Byb2Zlc3Npb25FbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fcHJvZmVzc2lvbklucHV0LnZhbHVlO1xuICAgICAgdGhpcy5fbmFtZUlucHV0LnBsYWNlaG9sZGVyID0gXCJOYW1lXCI7XG4gICAgICB0aGlzLl9wcm9mZXNzaW9uSW5wdXQucGxhY2Vob2xkZXIgPSBcIlByb2Zlc3Npb25cIjtcbiAgICB9XG4gIFxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCl7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNldFVzZXJJbmZvKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgZXhwb3J0IHsgVXNlckluZm8gfTsiLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL3BvcHVwLmpzXCI7XG5pbXBvcnQgeyBvdmVybGF5IH0gZnJvbSBcIi4vY29uc3QuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgb3ZlcmxheSkge1xuICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvciwgb3ZlcmxheSk7XG4gICAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZXMtcG9wdXBfX2l0ZW0taW1hZ2UnKTtcbiAgICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmltYWdlcy1wb3B1cF9faXRlbS10aXRsZScpO1xuICAgIH1cbiAgICBcbiAgICBvcGVuKGxpbmssIHRpdGxlKSB7XG4gICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdpbWFnZXMtcG9wdXAtaXRlbS12aXNpYmxlJylcbiAgICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvdmVybGF5LXZpc2libGUnKTtcbiAgICB9XG4gIFxuICAgIGNsb3NlKCl7XG4gICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdpbWFnZXMtcG9wdXAtaXRlbS12aXNpYmxlJyk7XG4gICAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXktdmlzaWJsZScpO1xuICAgIH1cbn07XG5cbmV4cG9ydCB7UG9wdXBXaXRoSW1hZ2V9OyIsImNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIH1cbiAgXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG4gIFxuICAgIHJlbmRlcigpIHtcbiAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgICAgdGhpcy5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH1cbn07XG5cbmV4cG9ydCB7U2VjdGlvbn07IiwiaW1wb3J0IHsgb3ZlcmxheSB9IGZyb20gXCIuL2NvbnN0LmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuL3BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4vc2VjdGlvbi5qc1wiO1xuaW1wb3J0IHNhbHRMYWtlQ2l0eUltYWdlIGZyb20gXCIuLi9pbWFnZXMvd3lvbWlnLmpwZ1wiO1xuaW1wb3J0IHNlYXR0bGVJbWFnZSBmcm9tIFwiLi4vaW1hZ2VzL3NlYXR0bGUuanBnXCI7XG5pbXBvcnQgc2FuRnJhbmNpc2NvSW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9zYW4tZnJhbnNpc2NvLmpwZ1wiO1xuaW1wb3J0IG1pYW1pSW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9taWFtaS5qcGdcIjtcbmltcG9ydCBob2xseXdvb2RJbWFnZSBmcm9tIFwiLi4vaW1hZ2VzL2hvbGx5d29vZC5qcGdcIjtcbmltcG9ydCBuZXdZb3JrSW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9uZXcteW9yay5qcGdcIjtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICAgIHtcbiAgICAgIG5hbWU6ICdTYWx0IExha2UgQ2l0eSwgV3lvbWluZycsXG4gICAgICBsaW5rOiBzYWx0TGFrZUNpdHlJbWFnZVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ1NlYXR0bGUsIFdhc2hpbmd0b24nLFxuICAgICAgbGluazogc2VhdHRsZUltYWdlXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnU2FuIEZyYW5jaXNjbywgQ2FsaWZvcm5pYScsXG4gICAgICBsaW5rOiBzYW5GcmFuY2lzY29JbWFnZVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ01pYW1pLCBGbG9yaWRhJyxcbiAgICAgIGxpbms6IG1pYW1pSW1hZ2VcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdIb2xseXdvb2QsIExvcyBBbmdlbGVzJyxcbiAgICAgIGxpbms6IGhvbGx5d29vZEltYWdlXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnTnVldmEgWW9yaywgTnVldmEgWW9yaycsXG4gICAgICBsaW5rOiBuZXdZb3JrSW1hZ2VcbiAgICB9LFxuXTsgXG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XG4gICAgY29uc3QgcG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmltYWdlcy1wb3B1cF9faXRlbScpKTtcbiAgICBwb3B1cC5vcGVuKGxpbmssIG5hbWUpO1xuXG4gICAgY29uc3QgcG9wdXBDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZXMtcG9wdXBfX2l0ZW0tY2xvc2UtYnV0dG9uJyk7XG4gICAgXG4gICAgcG9wdXBDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgcG9wdXAuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICAgIHBvcHVwLl9oYW5kbGVFc2NDbG9zZShldnQpO1xuICAgIH0pO1xuXG4gICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4ge1xuICAgICAgICBwb3B1cC5jbG9zZSgpO1xuICAgIH0pO1xufTtcblxuY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgaGFuZGxlQ2FyZENsaWNrKSB7XG4gICAgICB0aGlzLm5hbWUgPSBkYXRhLm5hbWU7XG4gICAgICB0aGlzLmxpbmsgPSBkYXRhLmxpbms7XG4gICAgICB0aGlzLmhhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB9XG4gIFxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKVxuICAgICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19jYXJkXCIpXG4gICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIFxuICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICAgIH1cbiAgXG4gICAgZ2VuZXJhdGVDYXJkKCkge1xuICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fY2FyZC10aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcbiAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19jYXJkLWltYWdlXCIpLnNyYyA9IHRoaXMubGluaztcbiAgXG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgIH1cbiAgXG4gICAgbGlrZUJ1dHRvbkFjdGl2ZSgpIHtcbiAgICAgIHRoaXMuZWxlbWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fY2FyZC1saWtlLWJ1dHRvbi1jb250YWluZXJcIilcbiAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkc19fY2FyZC1saWtlLWJ1dHRvbi1jb250YWluZXJfYWN0aXZlXCIpO1xuICAgIH1cbiAgXG4gICAgZGVsZXRlQ2FyZCgpIHtcbiAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdChcIi5jYXJkc19fY2FyZFwiKTtcbiAgICAgIGNhcmQucmVtb3ZlKCk7XG4gICAgfVxuICBcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2NhcmQtbGlrZS1idXR0b24tY29udGFpbmVyXCIpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubGlrZUJ1dHRvbkFjdGl2ZSgpO1xuICAgICAgICB9KTtcbiAgXG4gICAgICAgIHRoaXMuZWxlbWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2NhcmQtdHJhc2gtYnV0dG9uXCIpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlQ2FyZCgpO1xuICAgICAgICB9KTtcbiAgXG4gICAgICAgIHRoaXMuZWxlbWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2NhcmQtaW1hZ2VcIilcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2sodGhpcy5uYW1lLCB0aGlzLmxpbmspO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBnZW5lcmF0ZU5ld0NhcmRzKCkge1xuICAgIGxldCBuZXdDYXJkTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdGl0bGUnKS52YWx1ZTtcbiAgICBsZXQgbmV3Q2FyZExpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3VybCcpLnZhbHVlO1xuICBcbiAgICBsZXQgbmV3Q2FyZCA9IHtcbiAgICAgIG5hbWU6IG5ld0NhcmROYW1lLFxuICAgICAgbGluazogbmV3Q2FyZExpbmtcbiAgICB9O1xuICBcbiAgICBpbml0aWFsQ2FyZHMucHVzaChuZXdDYXJkKTtcbiAgXG4gICAgZnVuY3Rpb24gYWRkTmV3Q2FyZChhcnIpIHtcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGFyclthcnIubGVuZ3RoIC0gMV0sIGhhbmRsZUNhcmRDbGljayk7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGl0ZW1zOiBbY2FyZEVsZW1lbnRdLFxuICAgICAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiBpdGVtXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnLmNhcmRzJ1xuICAgICAgICApO1xuICAgICAgICBzZWN0aW9uLnJlbmRlcigpO1xuICAgICAgfSAgICAgIFxuICBcbiAgICBhZGROZXdDYXJkKGluaXRpYWxDYXJkcyk7XG59O1xuXG5leHBvcnQge2luaXRpYWxDYXJkcywgaGFuZGxlQ2FyZENsaWNrLCBDYXJkLCBnZW5lcmF0ZU5ld0NhcmRzfTsiLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Iob2JqQ29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX29iakNvbmZpZyA9IG9iakNvbmZpZztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fb2JqQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fb2JqQ29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgfVxuXG4gIF9zaG93RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLnBvcHVwX19lcnJvcl8ke2lucHV0RWxlbWVudC5pZH1gKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vYmpDb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb2JqQ29uZmlnLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAucG9wdXBfX2Vycm9yXyR7aW5wdXRFbGVtZW50LmlkfWApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29iakNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29iakNvbmZpZy5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2Zvcm1FbGVtZW50LmNoZWNrVmFsaWRpdHkoKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vYmpDb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9vYmpDb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGV2dCA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59O1xuXG5leHBvcnQgeyBGb3JtVmFsaWRhdG9yIH07IiwiaW1wb3J0IFwiLi9zdHlsZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgY2xvc2VCdXRvblNyYyBmcm9tIFwiLi9pbWFnZXMvQ2xvc2UtYnV0dG9uLnBuZ1wiO1xuaW1wb3J0IGhlYWRlckxvZ29TcmMgZnJvbSBcIi4vaW1hZ2VzL0xvZ28uc3ZnXCI7XG5pbXBvcnQgcHJvZmlsZUltYWdlU3JjIGZyb20gXCIuL2ltYWdlcy9wcm9maWxlLXBpYy5qcGdcIjtcbmltcG9ydCBlZGl0QnV0dG9uU3JjIGZyb20gXCIuL2ltYWdlcy9FZGl0LUJ1dHRvbi5zdmdcIjtcbmltcG9ydCBhZGRCdXR0b25TcmMgZnJvbSBcIi4vaW1hZ2VzL0FkZC1CdXR0b24uc3ZnXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4vY29tcG9uZW50cy9wb3B1cFdpdGhGb3JtLmpzXCI7IFxuaW1wb3J0IHtvdmVybGF5LCBwcm9maWxlRm9ybUNvbnRhaW5lciwgZWRpdFByb2ZpbGVCdXR0b24sIGNsb3NlUHJvZmlsZUJ1dHRvbiwgcHJvZmlsZUZvcm0sIHByb2ZpbGVTdWJtaXRCdXR0b24sIGFkZE5ld0ltZ0J1dHRvbiwgY2xvc2VOZXdQbGFjZUJ1dHRvbiwgbmV3UGxhY2VGb3JtQ29udGFpbmVyLCBuZXdQbGFjZUZvcm0sIG5ld1BsYWNlU3VibWl0QnV0dG9uLCBwcm9maWxlTmFtZSwgcHJvZmlsZVByb2Zlc3Npb24sIHByb2ZpbGVOYW1lSW5wdXQsIHByb2ZpbGVQcm9mZXNzaW9uSW5wdXQsIGNhcmRMaXN0U2VsZWN0b3J9IGZyb20gXCIuL2NvbXBvbmVudHMvY29uc3RcIjtcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4vY29tcG9uZW50cy91c2VySW5mby5qc1wiO1xuaW1wb3J0IHtpbml0aWFsQ2FyZHMsIGhhbmRsZUNhcmRDbGljaywgQ2FyZCwgZ2VuZXJhdGVOZXdDYXJkc30gZnJvbSBcIi4vY29tcG9uZW50cy9jYXJkLmpzXCI7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4vY29tcG9uZW50cy9zZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4vY29tcG9uZW50cy9mb3JtVmFsaWRhdGlvci5qc1wiO1xuXG5jb25zdCBwcm9maWxlRWRpdENsb3NlQnV0dG9uSW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGVFZGl0Q2xvc2VCdXR0b25cIik7XG5wcm9maWxlRWRpdENsb3NlQnV0dG9uSW1hZ2Uuc3JjID0gY2xvc2VCdXRvblNyYztcblxuY29uc3QgbmV3UGxhY2VDbG9zZUJ1dHRvbkltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXdQbGFjZUNsb3NlQnV0dG9uXCIpO1xubmV3UGxhY2VDbG9zZUJ1dHRvbkltYWdlLnNyYyA9IGNsb3NlQnV0b25TcmM7XG5cbmNvbnN0IGhlYWRlckxvZ29JbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVhZGVyTG9nb1wiKTtcbmhlYWRlckxvZ29JbWFnZS5zcmMgPSBoZWFkZXJMb2dvU3JjO1xuXG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGVJbWFnZVwiKTtcbnByb2ZpbGVJbWFnZS5zcmMgPSBwcm9maWxlSW1hZ2VTcmM7XG5cbmNvbnN0IGVkaXRCdXR0b25JbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdEJ1dG9uXCIpO1xuZWRpdEJ1dHRvbkltYWdlLnNyYyA9IGVkaXRCdXR0b25TcmM7XG5cbmNvbnN0IGFkZEJ1dHRvbkltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGRCdXR0b25cIik7XG5hZGRCdXR0b25JbWFnZS5zcmMgPSBhZGRCdXR0b25TcmM7XG5cbmNvbnN0IHBvcHVwV2l0aEZvcm1Qcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvZmlsZUZvcm1Db250YWluZXIsIGVkaXRQcm9maWxlQnV0dG9uLCBjbG9zZVByb2ZpbGVCdXR0b24sIHByb2ZpbGVGb3JtLCBwcm9maWxlU3VibWl0QnV0dG9uLCBvdmVybGF5KTtcbnBvcHVwV2l0aEZvcm1Qcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVOYW1lLCBwcm9maWxlUHJvZmVzc2lvbiwgcHJvZmlsZU5hbWVJbnB1dCwgcHJvZmlsZVByb2Zlc3Npb25JbnB1dCwgcHJvZmlsZVN1Ym1pdEJ1dHRvbik7XG51c2VySW5mby5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih7XG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAncG9wdXBfX2Vycm9yX3Zpc2libGUnXG59LCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKSk7XG5cbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHBvcHVwV2l0aEZvcm1OZXdQTGFjZSA9IG5ldyBQb3B1cFdpdGhGb3JtKG5ld1BsYWNlRm9ybUNvbnRhaW5lciwgYWRkTmV3SW1nQnV0dG9uLCBjbG9zZU5ld1BsYWNlQnV0dG9uLCBuZXdQbGFjZUZvcm0sIG5ld1BsYWNlU3VibWl0QnV0dG9uLCBvdmVybGF5KTtcbnBvcHVwV2l0aEZvcm1OZXdQTGFjZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBuZXdQbGFjZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih7XG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAncG9wdXBfX2Vycm9yX3Zpc2libGUnXG59LCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fbmV3LXBsYWNlJykpO1xuXG5uZXdQbGFjZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBpbml0aWFsQ2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gIHJlbmRlcmVyOiAoZWwpID0+IHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoZWwsIGhhbmRsZUNhcmRDbGljayk7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxufSwgY2FyZExpc3RTZWxlY3Rvcik7XG5cbmluaXRpYWxDYXJkTGlzdC5yZW5kZXIoKTtcblxubmV3UGxhY2VTdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZW5lcmF0ZU5ld0NhcmRzKTtcblxuLypBZ3JlZ8OpIGxhIG9wY2lvbiBkZSBjYW1iaWFyIGxhIGZvdG8gZGUgcGVyZmlsLCBcbmF1biBxdWUgbm8gdmllbmUgZW4gbGFzIGluZGljYWNpb25lcyBkZSBsYSByZWFsaXphY2lvbiBkZWwgcHJveWVjdG8sIGxhIHV0aWxpemFyZSBwb3N0ZXJpb3JtZW50ZS5cblxuZnVuY3Rpb24gZWRpdFByb2ZpbGVJbWFnZShwcm9maWxlSW1hZ2VJbnB1dCl7XG4gIGlmKHByb2ZpbGVJbWFnZUlucHV0LnZhbHVlID09PSB1bmRlZmluZWQgfHwgcHJvZmlsZUltYWdlSW5wdXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICBwcm9maWxlSW1hZ2VJbnB1dC52YWx1ZSA9ICcuL2ltYWdlcy9wcm9maWxlLXBpYy5qcGcnXG4gICAgcHJvZmlsZUltYWdlLnNyYyA9IHByb2ZpbGVJbWFnZUlucHV0LnZhbHVlO1xuICB9IGVsc2V7XG4gICAgcHJvZmlsZUltYWdlLnNyYyA9IHByb2ZpbGVJbWFnZUlucHV0LnZhbHVlO1xuICB9XG59O1xuXG5mdW5jdGlvbiBlZGl0UHJvZmFpbGVWYWx1ZXMoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBwcm9maWxlTmFtZUlucHV0LnZhbHVlO1xuICAgIHByb2ZpbGVQcm9mZXNzaW9uLnRleHRDb250ZW50ID0gcHJvZmlsZVByb2Zlc3Npb25JbnB1dC52YWx1ZTtcbiAgICBlZGl0UHJvZmlsZUltYWdlKHByb2ZpbGVJbWFnZUlucHV0KTtcbiAgICBwcm9maWxlTmFtZUlucHV0LnBsYWNlaG9sZGVyID0gXCJOYW1lXCI7XG4gICAgcHJvZmlsZVByb2Zlc3Npb25JbnB1dC5wbGFjZWhvbGRlciA9IFwiUHJvZmVzc2lvblwiO1xuICAgIHByb2ZpbGVJbWFnZUlucHV0LnBsYWNlaG9sZGVyID0gXCJQcm9maWxlIEltYWdlIFVSTFwiXG59O1xucHJvZmlsZVN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycgLCBlZGl0UHJvZmFpbGVWYWx1ZXMpOyovIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJvdmVybGF5IiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9wb3B1cCIsIl9vdmVybGF5Iiwia2V5IiwidmFsdWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJldnQiLCJjbG9zZSIsIl90aGlzIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwiUG9wdXBXaXRoRm9ybSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsIm9wZW5CdXRvblNlbGVjdG9yIiwiY2xvc2VCdXR0b25TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIlN1Ym1pdEJ1dHRvbiIsImNhbGwiLCJfb3BlbkJ1dHRvbiIsIl9jbG9zZUJ1dHRvbiIsIl9mb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3RoaXMyIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIm9wZW4iLCJyZXNldCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9maWxlRm9ybUNvbnRhaW5lciIsImVkaXRQcm9maWxlQnV0dG9uIiwiY2xvc2VQcm9maWxlQnV0dG9uIiwicHJvZmlsZUZvcm0iLCJnZXRFbGVtZW50QnlJZCIsInByb2ZpbGVTdWJtaXRCdXR0b24iLCJhZGROZXdJbWdCdXR0b24iLCJjbG9zZU5ld1BsYWNlQnV0dG9uIiwibmV3UGxhY2VGb3JtIiwibmV3UGxhY2VGb3JtQ29udGFpbmVyIiwibmV3UGxhY2VTdWJtaXRCdXR0b24iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVQcm9mZXNzaW9uIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVQcm9mZXNzaW9uSW5wdXQiLCJ0ZXh0Q29udGVudCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwicHJvZmVzc2lvblNlbGVjdG9yIiwibmFtZUlucHV0IiwicHJvZmVzc2lvbklucHV0Iiwic3VibWl0QnV0dG9uIiwiX25hbWVFbGVtZW50IiwiX3Byb2Zlc3Npb25FbGVtZW50IiwiX25hbWVJbnB1dCIsIl9wcm9mZXNzaW9uSW5wdXQiLCJuYW1lIiwicHJvZmVzc2lvbiIsInBsYWNlaG9sZGVyIiwicHJldmVudERlZmF1bHQiLCJzZXRVc2VySW5mbyIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlIiwiX3RpdGxlIiwibGluayIsInRpdGxlIiwic3JjIiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJmb3JFYWNoIiwiaXRlbSIsImNhcmRFbGVtZW50IiwiYWRkSXRlbSIsImluaXRpYWxDYXJkcyIsImhhbmRsZUNhcmRDbGljayIsInBvcHVwIiwiQ2FyZCIsImRhdGEiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwidG9nZ2xlIiwiY2xvc2VzdCIsImxpa2VCdXR0b25BY3RpdmUiLCJkZWxldGVDYXJkIiwiRm9ybVZhbGlkYXRvciIsIm9iakNvbmZpZyIsImZvcm1FbGVtZW50IiwiX29iakNvbmZpZyIsIl9mb3JtRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwiaW5wdXRTZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRXJyb3IiLCJfc2hvd0Vycm9yIiwiY2hlY2tWYWxpZGl0eSIsImRpc2FibGVkIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJjbG9zZUJ1dG9uU3JjIiwiaGVhZGVyTG9nb1NyYyIsInByb2ZpbGVJbWFnZVNyYyIsImVkaXRCdXR0b25TcmMiLCJhZGRCdXR0b25TcmMiLCJzZXRFdmVudExpc3RlbmVycyIsImVuYWJsZVZhbGlkYXRpb24iLCJlbCIsImdlbmVyYXRlQ2FyZCIsInJlbmRlciIsImFyciIsIm5ld0NhcmQiLCJwdXNoIiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==